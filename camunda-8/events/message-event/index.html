<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/exercises/blog/rss.xml" title="Camunda Exercises Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/exercises/blog/atom.xml" title="Camunda Exercises Blog Atom Feed"><title data-react-helmet="true">Message Event | Camunda Exercises</title><meta data-react-helmet="true" property="og:url" content="https://camunda-university-meetup.github.io/exercises/camunda-8/events/message-event"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Message Event | Camunda Exercises"><meta data-react-helmet="true" name="description" content="Message events can be used to start, interrupt or end messages. Additionally, they can used as non-interrupting events, e.g. if one of your customer requests some additional information without wanting to interrupt a process. The event always provides a name/ topic and carries a payload, basically like every simple email."><meta data-react-helmet="true" property="og:description" content="Message events can be used to start, interrupt or end messages. Additionally, they can used as non-interrupting events, e.g. if one of your customer requests some additional information without wanting to interrupt a process. The event always provides a name/ topic and carries a payload, basically like every simple email."><link data-react-helmet="true" rel="shortcut icon" href="/exercises/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://camunda-university-meetup.github.io/exercises/camunda-8/events/message-event"><link data-react-helmet="true" rel="alternate" href="https://camunda-university-meetup.github.io/exercises/camunda-8/events/message-event" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://camunda-university-meetup.github.io/exercises/camunda-8/events/message-event" hreflang="x-default"><link rel="stylesheet" href="/exercises/assets/css/styles.8565d999.css">
<link rel="preload" href="/exercises/assets/js/runtime~main.c9e8b71c.js" as="script">
<link rel="preload" href="/exercises/assets/js/main.3848e53b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/exercises/"><img src="/exercises/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/exercises/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Camunda Exercises</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/camunda-university-meetup/exercises" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/exercises/"><img src="/exercises/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/exercises/img/logo.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Camunda Exercises</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/camunda-university-meetup/exercises" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0"><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/exercises/">Intro</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Camunda 7</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/">Intro</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Tasks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/tasks/user-task">User Task</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Service Task</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/tasks/service-task/service-task-low-code">Serivce Task - Low-Code</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/tasks/service-task/service-task-coding">Service Task - Coding</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Gateways</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/gateways/exclusive-gateway">Exclusive Gateway</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/gateways/parallel-gateway">Parallel Gateway</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/gateways/inclusive-gateway">Inclusive Gateway</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/events/timer-event">Timer Event</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/events/message-event">Message Event</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/events/event-based-gateway">Event-based-Gateway</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Call Activity</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/call-activity/call-activity">Order Process</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Attached boundary events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/attached-boundary-events/interrupting">Interrupting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/attached-boundary-events/none-interrupting">Non-Interrupting</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Instructions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-7/instructions/deploying-diagrams">Deploying diagrams</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Camunda 8</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/exercises/camunda-8/">Intro</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Tasks</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-8/tasks/user-task">User Task</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/exercises/camunda-8/tasks/service-task">Service Task</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Events</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/exercises/camunda-8/events/timer-event">Timer Event</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/exercises/camunda-8/events/message-event">Message Event</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/exercises/camunda-8/events/event-based-gateway">Event-based-Gateway</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Message Event</h1></header><div class="markdown"><p>Message events can be used to start, interrupt or end messages. Additionally, they can used as non-interrupting events, e.g. if one of your customer requests some additional information without wanting to interrupt a process. The event always provides a name/ topic and carries a payload, basically like every simple email.</p><p>Let us consider a simple Ordering Process:
<img alt="process_event" src="/exercises/assets/images/process-message-event-8f955f576779d105b1537566afcd65b5.png"></p><p>Once an order is placed by the customer, an employee reviews the order, waits for payment to be received, and then ships the ordered product.
So far so good, but how can we trigger the event? In production, messages come, for example, from customers in the form of emails, which are processed by components of the backend. In our case we will simulate the customer request by an API call using the <a href="https://docs.camunda.io/docs/apis-clients/cli-client/" target="_blank" rel="noopener noreferrer">CLI client</a>. A documentation of the Message API from Camunda can be found <a href="https://docs.camunda.io/docs/components/concepts/messages/" target="_blank" rel="noopener noreferrer">here</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="set-up-the-cli-client"></a>Set up the CLI client<a class="hash-link" href="#set-up-the-cli-client" title="Direct link to heading">#</a></h2><p>Follow the instructions at <a href="https://docs.camunda.io/docs/apis-clients/cli-client/" target="_blank" rel="noopener noreferrer">https://docs.camunda.io/docs/apis-clients/cli-client/</a></p><ul><li>Create a Client in the API tab of your camunda cloud cluster</li><li>Copy the values</li><li>Export them in your CLI</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">export ZEEBE_ADDRESS=&#x27;[Zeebe API]&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">export ZEEBE_CLIENT_ID=&#x27;[Client ID]&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">export ZEEBE_CLIENT_SECRET=&#x27;[Client Secret]&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="set-up-the-communication"></a>Set up the communication<a class="hash-link" href="#set-up-the-communication" title="Direct link to heading">#</a></h2><p>Familiarize yourself with the <a href="https://docs.camunda.io/docs/apis-clients/grpc/#publishmessage-rpc" target="_blank" rel="noopener noreferrer">Message API</a> and configure the Message event. You need to correlate the message to the process instance. This is done by using Correlation keys. In our case those keys could be the ordered product and a customer ID.
As soon as the process engine receives the message about the succeeded payment, the content of the message is mapped to a process variable. When corellating a message the following variables can be set:</p><ul><li>amount (string)</li><li>paymentType (String)</li></ul><p>Define the variables as readonly form fields in the &quot;Deliver Product&quot;-task.</p><p>A sample request looks like this:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">zbctl publish message &quot;payment&quot; --correlationKey &quot;123&quot; --variables &#x27;{ &quot;myVariable&quot;: 5 }&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Create a request in the CLI with all required properties and make sure that the request is successfully accepted by the process engine. By fetching the process variables in the camunda web surface, you should be able to see your provided process variables.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="add-a-interrupting-message-event-in-a-event-subprocess"></a>Add a interrupting message event in a event subprocess<a class="hash-link" href="#add-a-interrupting-message-event-in-a-event-subprocess" title="Direct link to heading">#</a></h2><p>A customer can cancel the order anytime. This cancellation process should be triggered by the customer&#x27;s email, after which an employee must take care of canceling and deleting the order. Model this termination process as a subprocess and then create a corresponding Request. The message from the customer should include the reason for the cancellation. The cancellation is also checked by an employee to whom the reason is shown.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/exercises/camunda-8/events/timer-event"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Timer Event</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/exercises/camunda-8/events/event-based-gateway"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Event-based-Gateway Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#set-up-the-cli-client" class="table-of-contents__link">Set up the CLI client</a></li><li><a href="#set-up-the-communication" class="table-of-contents__link">Set up the communication</a></li><li><a href="#add-a-interrupting-message-event-in-a-event-subprocess" class="table-of-contents__link">Add a interrupting message event in a event subprocess</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/exercises/camunda-7/instructions/deploying-diagrams">Instructions</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://forum.camunda.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Camunda Forum</a></li><li class="footer__item"><a href="https://www.meetup.com/de-DE/camunda-university-group/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Camunda University Meetup</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/camunda-community-hub" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 FlowSquad GmbH</div></div></div></footer></div>
<script src="/exercises/assets/js/runtime~main.c9e8b71c.js"></script>
<script src="/exercises/assets/js/main.3848e53b.js"></script>
</body>
</html>